import{Q as R,z as D,C as S,g as L,h as m,a2 as M,j as _,S as j,aj as I,ai as P,an as F,x as V,l as p,Y as U,ac as H,ap as z}from"./framework.486a96e6.js";var v=typeof window<"u";function C(e){return v?requestAnimationFrame(e):-1}function q(e){v&&cancelAnimationFrame(e)}function ae(e){C(()=>C(e))}var J=e=>e===window,N=(e,n)=>({top:0,left:0,right:e,bottom:n,width:e,height:n}),oe=e=>{const n=p(e);if(J(n)){const t=n.innerWidth,i=n.innerHeight;return N(t,i)}return n!=null&&n.getBoundingClientRect?n.getBoundingClientRect():N(0,0)};function se(e=!1){const n=m(e);return[n,(i=!n.value)=>{n.value=i}]}function ue(e){const n=R(e,null);if(n){const t=D(),{link:i,unlink:a,internalChildren:r}=n;i(t),S(()=>a(t));const s=L(()=>r.indexOf(t));return{parent:n,index:s}}return{parent:null,index:m(-1)}}function K(e){const n=[],t=i=>{Array.isArray(i)&&i.forEach(a=>{var r;z(a)&&(n.push(a),(r=a.component)!=null&&r.subTree&&(n.push(a.component.subTree),t(a.component.subTree.children)),a.children&&t(a.children))})};return t(e),n}var O=(e,n)=>{const t=e.indexOf(n);return t===-1?e.findIndex(i=>n.key!==void 0&&n.key!==null&&i.type===n.type&&i.key===n.key):t};function Q(e,n,t){const i=K(e.subTree.children);t.sort((r,s)=>O(i,r.vnode)-O(i,s.vnode));const a=t.map(r=>r.proxy);n.sort((r,s)=>{const u=a.indexOf(r),o=a.indexOf(s);return u-o})}function ce(e){const n=M([]),t=M([]),i=D();return{children:n,linkChildren:r=>{U(e,Object.assign({link:o=>{o.proxy&&(t.push(o),n.push(o.proxy),Q(i,n,t))},unlink:o=>{const c=t.indexOf(o);n.splice(c,1),t.splice(c,1)},children:n,internalChildren:t},r))}}}var k=1e3,E=60*k,x=60*E,A=24*x;function G(e){const n=Math.floor(e/A),t=Math.floor(e%A/x),i=Math.floor(e%x/E),a=Math.floor(e%E/k),r=Math.floor(e%k);return{total:e,days:n,hours:t,minutes:i,seconds:a,milliseconds:r}}function X(e,n){return Math.floor(e/1e3)===Math.floor(n/1e3)}function le(e){let n,t,i,a;const r=m(e.time),s=L(()=>G(r.value)),u=()=>{i=!1,q(n)},o=()=>Math.max(t-Date.now(),0),c=d=>{var T,b;r.value=d,(T=e.onChange)==null||T.call(e,s.value),d===0&&(u(),(b=e.onFinish)==null||b.call(e))},h=()=>{n=C(()=>{i&&(c(o()),r.value>0&&h())})},f=()=>{n=C(()=>{if(i){const d=o();(!X(d,r.value)||d===0)&&c(d),r.value>0&&f()}})},l=()=>{v&&(e.millisecond?h():f())},B=()=>{i||(t=Date.now()+r.value,i=!0,l())},W=(d=e.time)=>{u(),r.value=d};return H(u),I(()=>{a&&(i=!0,a=!1,l())}),P(()=>{i&&(u(),a=!0)}),{start:B,pause:u,reset:W,current:s}}function Z(e){let n;_(()=>{e(),j(()=>{n=!0})}),I(()=>{n&&e()})}function $(e,n,t={}){if(!v)return;const{target:i=window,passive:a=!1,capture:r=!1}=t;let s=!1,u;const o=f=>{if(s)return;const l=p(f);l&&!u&&(l.addEventListener(e,n,{capture:r,passive:a}),u=!0)},c=f=>{if(s)return;const l=p(f);l&&u&&(l.removeEventListener(e,n,r),u=!1)};S(()=>c(i)),P(()=>c(i)),Z(()=>o(i));let h;return F(i)&&(h=V(i,(f,l)=>{c(l),o(f)})),()=>{h==null||h(),c(i),s=!0}}function fe(e,n,t={}){if(!v)return;const{eventName:i="click"}=t;$(i,r=>{(Array.isArray(e)?e:[e]).every(o=>{const c=p(o);return c&&!c.contains(r.target)})&&n(r)},{target:document})}var g,y;function de(){if(!g&&(g=m(0),y=m(0),v)){const e=()=>{g.value=window.innerWidth,y.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:g,height:y}}var ee=/scroll|auto|overlay/i,Y=v?window:void 0;function ne(e){return e.tagName!=="HTML"&&e.tagName!=="BODY"&&e.nodeType===1}function te(e,n=Y){let t=e;for(;t&&t!==n&&ne(t);){const{overflowY:i}=window.getComputedStyle(t);if(ee.test(i))return t;t=t.parentNode}return n}function ve(e,n=Y){const t=m();return _(()=>{e.value&&(t.value=te(e.value,n))}),t}var w;function me(){if(!w&&(w=m("visible"),v)){const e=()=>{w.value=document.hidden?"hidden":"visible"};e(),window.addEventListener("visibilitychange",e)}return w}var ie=Symbol("van-field");function he(e){const n=R(ie,null);n&&!n.customValue.value&&(n.customValue.value=e,V(e,()=>{n.resetValidation(),n.validateWithTrigger("onChange")}))}export{ie as C,oe as a,$ as b,ue as c,ce as d,se as e,ve as f,te as g,q as h,me as i,ae as j,he as k,le as l,fe as m,Z as o,C as r,de as u};
