import{M as R,a0 as D,z as L,g as S,h as m,a1 as M,j as _,O as F,ay as I,an as P,ab as U,x as V,l as p,W as j,ad as H,aD as z}from"./framework.3e3201d2.js";var v=typeof window<"u";function y(e){return v?requestAnimationFrame(e):-1}function q(e){v&&cancelAnimationFrame(e)}function ae(e){y(()=>y(e))}var J=e=>e===window,O=(e,n)=>({top:0,left:0,right:e,bottom:n,width:e,height:n}),oe=e=>{const n=p(e);if(J(n)){const t=n.innerWidth,i=n.innerHeight;return O(t,i)}return n!=null&&n.getBoundingClientRect?n.getBoundingClientRect():O(0,0)};function se(e=!1){const n=m(e);return[n,(i=!n.value)=>{n.value=i}]}function ue(e){const n=R(e,null);if(n){const t=D(),{link:i,unlink:a,internalChildren:r}=n;i(t),L(()=>a(t));const s=S(()=>r.indexOf(t));return{parent:n,index:s}}return{parent:null,index:m(-1)}}function K(e){const n=[],t=i=>{Array.isArray(i)&&i.forEach(a=>{var r;z(a)&&(n.push(a),(r=a.component)!=null&&r.subTree&&(n.push(a.component.subTree),t(a.component.subTree.children)),a.children&&t(a.children))})};return t(e),n}var N=(e,n)=>{const t=e.indexOf(n);return t===-1?e.findIndex(i=>n.key!==void 0&&n.key!==null&&i.type===n.type&&i.key===n.key):t};function G(e,n,t){const i=K(e.subTree.children);t.sort((r,s)=>N(i,r.vnode)-N(i,s.vnode));const a=t.map(r=>r.proxy);n.sort((r,s)=>{const u=a.indexOf(r),o=a.indexOf(s);return u-o})}function le(e){const n=M([]),t=M([]),i=D();return{children:n,linkChildren:r=>{j(e,Object.assign({link:o=>{o.proxy&&(t.push(o),n.push(o.proxy),G(i,n,t))},unlink:o=>{const l=t.indexOf(o);n.splice(l,1),t.splice(l,1)},children:n,internalChildren:t},r))}}}var k=1e3,E=60*k,x=60*E,A=24*x;function Q(e){const n=Math.floor(e/A),t=Math.floor(e%A/x),i=Math.floor(e%x/E),a=Math.floor(e%E/k),r=Math.floor(e%k);return{total:e,days:n,hours:t,minutes:i,seconds:a,milliseconds:r}}function X(e,n){return Math.floor(e/1e3)===Math.floor(n/1e3)}function ce(e){let n,t,i,a;const r=m(e.time),s=S(()=>Q(r.value)),u=()=>{i=!1,q(n)},o=()=>Math.max(t-Date.now(),0),l=f=>{var T,b;r.value=f,(T=e.onChange)==null||T.call(e,s.value),f===0&&(u(),(b=e.onFinish)==null||b.call(e))},h=()=>{n=y(()=>{i&&(l(o()),r.value>0&&h())})},d=()=>{n=y(()=>{if(i){const f=o();(!X(f,r.value)||f===0)&&l(f),r.value>0&&d()}})},c=()=>{v&&(e.millisecond?h():d())},B=()=>{i||(t=Date.now()+r.value,i=!0,c())},Y=(f=e.time)=>{u(),r.value=f};return H(u),I(()=>{a&&(i=!0,a=!1,c())}),P(()=>{i&&(u(),a=!0)}),{start:B,pause:u,reset:Y,current:s}}function Z(e){let n;_(()=>{e(),F(()=>{n=!0})}),I(()=>{n&&e()})}function $(e,n,t={}){if(!v)return;const{target:i=window,passive:a=!1,capture:r=!1}=t;let s=!1,u;const o=d=>{if(s)return;const c=p(d);c&&!u&&(c.addEventListener(e,n,{capture:r,passive:a}),u=!0)},l=d=>{if(s)return;const c=p(d);c&&u&&(c.removeEventListener(e,n,r),u=!1)};L(()=>l(i)),P(()=>l(i)),Z(()=>o(i));let h;return U(i)&&(h=V(i,(d,c)=>{l(c),o(d)})),()=>{h==null||h(),l(i),s=!0}}function de(e,n,t={}){if(!v)return;const{eventName:i="click"}=t;$(i,r=>{(Array.isArray(e)?e:[e]).every(o=>{const l=p(o);return l&&!l.contains(r.target)})&&n(r)},{target:document})}var g,C;function fe(){if(!g&&(g=m(0),C=m(0),v)){const e=()=>{g.value=window.innerWidth,C.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:g,height:C}}var ee=/scroll|auto|overlay/i,W=v?window:void 0;function ne(e){return e.tagName!=="HTML"&&e.tagName!=="BODY"&&e.nodeType===1}function te(e,n=W){let t=e;for(;t&&t!==n&&ne(t);){const{overflowY:i}=window.getComputedStyle(t);if(ee.test(i))return t;t=t.parentNode}return n}function ve(e,n=W){const t=m();return _(()=>{e.value&&(t.value=te(e.value,n))}),t}var w;function me(){if(!w&&(w=m("visible"),v)){const e=()=>{w.value=document.hidden?"hidden":"visible"};e(),window.addEventListener("visibilitychange",e)}return w}var ie=Symbol("van-field");function he(e){const n=R(ie,null);n&&!n.customValue.value&&(n.customValue.value=e,V(e,()=>{n.resetValidation(),n.validateWithTrigger("onChange")}))}export{ie as C,oe as a,$ as b,ue as c,le as d,se as e,ve as f,te as g,q as h,me as i,ae as j,he as k,ce as l,de as m,Z as o,y as r,fe as u};
